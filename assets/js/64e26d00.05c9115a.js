"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[917],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),c=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(s.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=r,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||a;return t?o.createElement(f,i(i({ref:n},p),{},{components:t})):o.createElement(f,i({ref:n},p))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2258:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=t(7462),r=(t(7294),t(3905));const a={},i="Start Koject",l={unversionedId:"usage/basic",id:"usage/basic",title:"Start Koject",description:"To start using Koject, simply add the @Provides annotation to the classes you want to make available for injection.",source:"@site/docs/usage/basic.md",sourceDirName:"usage",slug:"/usage/basic",permalink:"/koject/docs/usage/basic",draft:!1,editUrl:"https://github.com/Mori-Atsushi/koject/tree/main/docs/docs/usage/basic.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Usage",permalink:"/koject/docs/usage/"},next:{title:"Qualifier",permalink:"/koject/docs/usage/qualifier"}},s={},c=[{value:"Provide from functions",id:"provide-from-functions",level:2},{value:"Singleton Scope",id:"singleton-scope",level:2}],p={toc:c},u="wrapper";function d(e){let{components:n,...t}=e;return(0,r.kt)(u,(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"start-koject"},"Start Koject"),(0,r.kt)("p",null,"To start using Koject, simply add the ",(0,r.kt)("inlineCode",{parentName:"p"},"@Provides")," annotation to the classes you want to make available for injection."),(0,r.kt)("p",null,"Koject uses the ",(0,r.kt)("a",{parentName:"p",href:"https://kotlinlang.org/docs/classes.html#constructors"},"primary constructor")," to instantiate objects, so it's important to make sure that all parameter types in the primary constructor are annotated with ",(0,r.kt)("inlineCode",{parentName:"p"},"@Provides"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\nclass Repository\n\n@Provides\nclass Controller(\n    private val repository: Repository\n)\n")),(0,r.kt)("p",null,"Once you have called ",(0,r.kt)("inlineCode",{parentName:"p"},"Koject.start()"),", you can obtain an instance of a class by using the inject method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"fun main() {\n    Koject.start()\n\n    val controller = inject<Controller>()\n}\n")),(0,r.kt)("p",null,"In this case, ",(0,r.kt)("inlineCode",{parentName:"p"},"inject<Controller>()")," will return an instance of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Controller")," class that has been instantiated by Koject using its primary constructor and any ",(0,r.kt)("inlineCode",{parentName:"p"},"@Provides")," annotated dependencies. "),(0,r.kt)("h2",{id:"provide-from-functions"},"Provide from functions"),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"@Provides")," annotation in top-level functions to provide any types.\nThis can be particularly useful for providing dependencies that are shared across multiple modules."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\nfun provideDBConfig(): DBConfig {\n    return DBConfig.Builder().build()\n}\n\n@Provides\nfun provideDB(dbConfig: DBConfig): DB {\n    return DB.create(dbConfig)\n}\n")),(0,r.kt)("p",null,"You can also provide types by using functions defined in objects or companion objects. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"object DBFactory {\n    @Provides\n    fun create(): DB {\n        return DB.create()\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"class DB {\n    companion object {\n        @Provides\n        fun create(): DB {\n            return DB()\n        }\n    }\n}\n")),(0,r.kt)("h2",{id:"singleton-scope"},"Singleton Scope"),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"@Singleton")," annotation to indicate that an instance should be created only once and reused throughout the application.\nThis can be particularly useful for dependencies that are expensive to create or that need to be shared across multiple classes."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Singleton\n@Provides\nclass Api\n\n@Singleton\n@Provides\nfun provideDB(): DB {\n    return DB.create()\n}\n\n@Singleton\n@Provids\nclass Repository(\n    private val api: Api,\n    private val db: DB,\n)\n")),(0,r.kt)("p",null,"In this case, all three classes (",(0,r.kt)("inlineCode",{parentName:"p"},"Api"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DB"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"Repository"),") are annotated with ",(0,r.kt)("inlineCode",{parentName:"p"},"@Singleton"),", which means that Koject will create only one instance of each and reuse them throughout the application."),(0,r.kt)("p",null,"It's important to note that you can't inject a normally-scoped type into a singleton-scoped type."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\nclass NormalScope\n\n@Singleton\n@Provides\nclass SingletonScope(\n    // Cannot inject NormalScope into SingletonScope!\n    private val normal: NormalScope\n)\n")))}d.isMDXComponent=!0}}]);
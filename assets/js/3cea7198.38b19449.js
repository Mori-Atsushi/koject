"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[972],{3905:(e,t,o)=>{o.d(t,{Zo:()=>s,kt:()=>j});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)o=c[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)o=c[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var m=n.createContext({}),l=function(e){var t=n.useContext(m),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},s=function(e){var t=l(e.components);return n.createElement(m.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,c=e.originalType,m=e.parentName,s=a(e,["components","mdxType","originalType","parentName"]),p=l(o),u=r,j=p["".concat(m,".").concat(u)]||p[u]||d[u]||c;return o?n.createElement(j,i(i({ref:t},s),{},{components:o})):n.createElement(j,i({ref:t},s))}));function j(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var c=o.length,i=new Array(c);i[0]=u;var a={};for(var m in t)hasOwnProperty.call(t,m)&&(a[m]=t[m]);a.originalType=e,a[p]="string"==typeof e?e:r,i[1]=a;for(var l=2;l<c;l++)i[l]=o[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}u.displayName="MDXCreateElement"},1054:(e,t,o)=>{o.d(t,{BQ:()=>P,E:()=>f,GU:()=>z,Hc:()=>c,IQ:()=>E,Kj:()=>K,N8:()=>F,NR:()=>l,O$:()=>S,Or:()=>y,Pc:()=>u,Q4:()=>A,TD:()=>g,UK:()=>I,Vi:()=>D,Zf:()=>m,_P:()=>s,dK:()=>T,eG:()=>i,eh:()=>N,f3:()=>h,kJ:()=>x,m:()=>d,oX:()=>w,pn:()=>O,pt:()=>k,q:()=>a,q0:()=>M,ql:()=>j,s7:()=>V,tB:()=>p,tQ:()=>C,wn:()=>v,yc:()=>b});var n=o(7294);const r=e=>{let{children:t,href:o}=e;return n.createElement("a",{href:`/koject/api${o}`,target:"_blank"},n.createElement("code",null,t))},c=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/-provides/index.html"},"@Provides"),i=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/-singleton/index.html"},"@Singleton"),a=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/-qualifier/index.html"},"@Qualifier"),m=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/-named/index.html"},"@Named"),l=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/-binds/index.html"},"@Binds"),s=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/start.html"},"Koject.start()"),p=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/inject.html"},"inject()"),d=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject/lazy-inject.html"},"lazyInject()"),u=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject.extras/-koject-extras/index.html"},"KojectExtras"),j=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject.extras/-koject-extras-message/index.html"},"@KojectExtrasMessage"),k=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject.component/-component-extras/index.html"},"ComponentExtras"),h=()=>n.createElement(r,{href:"/koject-core/com.moriatsushi.koject.error/-missing-extras-exception/index.html"},"MissingExtrasException"),f=()=>n.createElement(r,{href:"/android/koject-android-core/com.moriatsushi.koject.android/application.html"},"application()"),C=()=>n.createElement(r,{href:"/android/koject-android-viewmodel/com.moriatsushi.koject.android.viewmodel/-view-model-component/index.html"},"@ViewModelComponent"),y=()=>n.createElement(r,{href:"/android/koject-android-viewmodel/com.moriatsushi.koject.android.viewmodel/-view-model-coroutine-scope/index.html"},"@ViewModelCoroutineScope"),v=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject/inject.html"},"ComponentActivity.inject()"),g=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject/lazy-inject.html"},"ComponentActivity.lazyInject()"),b=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/-activity-component/index.html"},"@ActivityComponent"),x=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/-activity-context/index.html"},"@ActivityContext"),w=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/-activity-context/index.html"},"@ActivityCoroutineScope"),E=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/lazy-view-models.html"},"ComponentActivity.lazyViewModels()"),N=()=>n.createElement(r,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/inject-view-models.html"},"ComponentActivity.injectViewModels()"),S=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject/inject.html"},"Fragment.inject()"),O=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject/lazy-inject.html"},"Fragment.lazyInject()"),I=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/-fragment-component/index.html"},"@FragmentComponent"),T=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/-fragment-coroutine-scope/index.html"},"@FragmentCoroutineScope"),P=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/-fragment-view-coroutine-scope/index.html"},"@FragmentViewCoroutineScope"),M=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/lazy-view-models.html"},"Fragment.lazyViewModels()"),A=()=>n.createElement(r,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/inject-view-models.html"},"Fragment.injectViewModels()"),K=()=>n.createElement(r,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/remember-inject.html"},"rememberInject()"),z=()=>n.createElement(r,{href:"/compose/koject-compose-viewmodel/com.moriatsushi.koject.compose.viewmodel/inject-view-model.html"},"injectViewModel()"),D=()=>n.createElement(r,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/-compose-component/index.html"},"@ComposeComponent"),V=()=>n.createElement(r,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/-compose-coroutine-scope/index.html"},"@ComposeCoroutineScope"),F=()=>n.createElement(r,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/-compose-context/index.html"},"@ComposeContext")},7593:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>m,toc:()=>s});var n=o(7462),r=(o(7294),o(3905)),c=o(1054);const i={},a="Inject into Composable",m={unversionedId:"compose/core",id:"compose/core",title:"Inject into Composable",description:"Koject allows injection into Composable functions.",source:"@site/docs/compose/core.mdx",sourceDirName:"compose",slug:"/compose/core",permalink:"/koject/docs/compose/core",draft:!1,editUrl:"https://github.com/Mori-Atsushi/koject/tree/main/docs/docs/compose/core.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Compose",permalink:"/koject/docs/compose/"},next:{title:"Inject ViewModels into Composable",permalink:"/koject/docs/compose/viewmodel"}},l={},s=[{value:"Setup for Compose",id:"setup-for-compose",level:2},{value:"Using Koject with Compose",id:"using-koject-with-compose",level:2},{value:"Inject Compsable CoroutineScope",id:"inject-compsable-coroutinescope",level:2},{value:"Inject Context (Android)",id:"inject-context-android",level:2}],p={toc:s},d="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"inject-into-composable"},"Inject into Composable"),(0,r.kt)("p",null,"Koject allows injection into Composable functions."),(0,r.kt)("h2",{id:"setup-for-compose"},"Setup for Compose"),(0,r.kt)("p",null,"To use Koject for injection into Composable functions, you need to add the following dependencies to your project:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'dependencies {\n    implementation("com.moriatsushi.koject:koject-compose-core:1.2.0-beta01")\n}\n')),(0,r.kt)("p",null,"Please also refer to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/setup"},"Setup document"),"."),(0,r.kt)("h2",{id:"using-koject-with-compose"},"Using Koject with Compose"),(0,r.kt)("p",null,"To inject a provided type into a Composable function, you can use the ",(0,r.kt)(c.Kj,{mdxType:"RememberInject"})," Composable function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\nclass SampleController\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Composable\nfun Sample(\n    controller: SampleController = rememberInject()\n) {\n    /* ... */\n}\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"While you can call ",(0,r.kt)("inlineCode",{parentName:"p"},"rememberInject()")," inside Composable functions, it is recommended to use it as a default argument instead.\nThis makes it easier to replace the injected dependency during testing."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Composable\nfun Sample() {\n    val controller: SampleController = rememberInject() // Not recommended\n}\n"))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Do not call the ",(0,r.kt)(c.tB,{mdxType:"Inject"})," function directly from Composable functions.\nCreating a new instance for each render or running the injection process many times can cause performance degradation."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Composable\nfun Sample(\n    controller: SampleController = inject() // DO NOT!!\n) {\n    /* ... */\n}\n"))),(0,r.kt)("h2",{id:"inject-compsable-coroutinescope"},"Inject Compsable CoroutineScope"),(0,r.kt)("p",null,"Koject defines the ",(0,r.kt)(c.Vi,{mdxType:"ComposeComponent"}),", which restricts a type to be injectable only into Composable functions or ",(0,r.kt)("inlineCode",{parentName:"p"},"ComposeComponent")," types."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@ComposeComponent\nclass ComposeHelper\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@ComposeComponent\nclass ComposeHelperHolder(\n    val helper: ComposeHelper // can be injected\n)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"val MyActivity: ComponentActivity {\n    val helper: ComposeHelper by lazyInject() // can be injected\n}\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"ComposeComponent")," type can also inject an comopsition-scoped ",(0,r.kt)("inlineCode",{parentName:"p"},"CoroutineScope"),".\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"CoroutineScope")," requires an ",(0,r.kt)(c.s7,{mdxType:"ComposeCoroutineScope"})," qualifier."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@ComposeComponent\nclass ComposeHelper(\n    @ComposeCoroutineScope\n    val coroutineScope: CoroutineScope // same as rememberCoroutineScope()\n)\n")),(0,r.kt)("p",null,"This ",(0,r.kt)("inlineCode",{parentName:"p"},"CoroutineScope")," will be canceled when hidden, just like ",(0,r.kt)("inlineCode",{parentName:"p"},"rememberCoroutineScope()"),"."),(0,r.kt)("h2",{id:"inject-context-android"},"Inject Context (Android)"),(0,r.kt)("p",null,"Similarly, ",(0,r.kt)("inlineCode",{parentName:"p"},"android.content.Context")," can be injected by adding a ",(0,r.kt)(c.N8,{mdxType:"ComposeContext"})," qualifier in Android."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@ComposeContext\nclass ComposeHelper(\n    @ComposeContext\n    val context: Context // same as LocalContext.current\n)\n")),(0,r.kt)("admonition",{title:"LINK",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/docs/android/components"},"Android components documentation")," for all available components for Android.")))}u.isMDXComponent=!0}}]);
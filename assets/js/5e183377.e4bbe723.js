"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[385],{3905:(e,n,t)=>{t.d(n,{Zo:()=>l,kt:()=>C});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=o.createContext({}),i=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},l=function(e){var n=i(e.components);return o.createElement(c.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},u=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),m=i(t),u=a,C=m["".concat(c,".").concat(u)]||m[u]||d[u]||r;return t?o.createElement(C,s(s({ref:n},l),{},{components:t})):o.createElement(C,s({ref:n},l))}));function C(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,s=new Array(r);s[0]=u;var p={};for(var c in n)hasOwnProperty.call(n,c)&&(p[c]=n[c]);p.originalType=e,p[m]="string"==typeof e?e:a,s[1]=p;for(var i=2;i<r;i++)s[i]=t[i];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9051:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>p,toc:()=>i});var o=t(7462),a=(t(7294),t(3905));const r={},s="Component (Experimental)",p={unversionedId:"core/component",id:"core/component",title:"Component (Experimental)",description:"The Component feature is experimental.",source:"@site/docs/core/component.mdx",sourceDirName:"core",slug:"/core/component",permalink:"/koject/docs/core/component",draft:!1,editUrl:"https://github.com/Mori-Atsushi/koject/tree/main/docs/docs/core/component.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Binds",permalink:"/koject/docs/core/binds"},next:{title:"Android",permalink:"/koject/docs/android/"}},c={},i=[{value:"What is the Component",id:"what-is-the-component",level:2},{value:"Create a custom Component",id:"create-a-custom-component",level:2}],l={toc:i},m="wrapper";function d(e){let{components:n,...r}=e;return(0,a.kt)(m,(0,o.Z)({},l,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"component-experimental"},"Component (Experimental)"),(0,a.kt)("admonition",{title:"Experimental",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"The Component feature is ",(0,a.kt)("strong",{parentName:"p"},"experimental"),".\nAPI may change in the future.")),(0,a.kt)("h2",{id:"what-is-the-component"},"What is the Component"),(0,a.kt)("p",null,"The Component can group provided types and organize dependencies."),(0,a.kt)("p",null,"By default, provided types are registered on the root component.\nYou can specify another component when provides."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"// Registered in RootComponent\n@Provides\nclass NormalClass\n\n// Registered in SomeComponent\n@SomeComponent\n@Provides\nclass ComponentClass\n")),(0,a.kt)("p",null,"Types registered in a component can only refer to types within the same component and types of the root component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\nclass NormalClass\n\n@SomeComponent\n@Provides\nclass SameComponentClass\n\n@OtherComponent\n@Provides\nclass OtherComponentClass\n\n@SomeComponent\n@Provides\nclass ComponentClass(\n    val normalClass: NormalClass, // can inject\n    val sameComponentClass: SameComponentClass, // can inject\n    // val otherComponentClass: OtherComponentClass, // cannot inject!\n)\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(9692).Z,width:"1800",height:"771"})),(0,a.kt)("p",null,"You can provide extras dependencies for your components during field injection.\nThis can be used to provide instances created by the platform, or dynamically change the dependencies."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"class ExtraClass // not provided\n\n@SomeComponent\n@Provides\nclass ComponentClass(\n    val extraClass: ExtraClass,\n)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\nval componentClass = inject<ComponentClass>(\n    componentExtras = SomeComponentExtras(ExtraClass())\n)\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(957).Z,width:"1800",height:"771"})),(0,a.kt)("admonition",{title:"Limitation",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Koject does not offer component hierarchy to avoid complexity.")),(0,a.kt)("h2",{id:"create-a-custom-component"},"Create a custom Component"),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"In most cases, custom Component is not needed.\nAdding components can add complexity.\nCarefully consider your need to add it.")),(0,a.kt)("p",null,"First, create a component annotation using the ",(0,a.kt)("a",{href:"/api/core/com.moriatsushi.koject.component/-component/index.html",target:"_blank"},(0,a.kt)("inlineCode",{parentName:"p"},"@Component"))," annotation."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\n@Component\nannotation class CustomComponent\n")),(0,a.kt)("p",null,"Add the component annotation created when providing and register the type to the component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\n@CustomComponent\nclass SomeClass(\n    val otherClass: OtherClass\n)\n")),(0,a.kt)("p",null,"Create an Extras class using ",(0,a.kt)("a",{href:"/api/core/com.moriatsushi.koject.component/-component-extras/index.html",target:"_blank"},(0,a.kt)("inlineCode",{parentName:"p"},"@ComonentExtras")),".\nAt that time, specify the component to be created."),(0,a.kt)("p",null,"If the component requires additional dependencies, provide them in properties of the Extras class.\nOtherwise, create a class with no properties."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\n@ComponentExtras(CustomComponent::class)\nclass CustomComponentExtras(\n    val otherClass: OtherClass // provide OtherClass\n)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\n@ComponentExtras(EmptyComponent::class)\nclass EmptyComponentExtras\n")),(0,a.kt)("p",null,"Call the ",(0,a.kt)("a",{href:"/api/core/com.moriatsushi.koject/inject.html",target:"_blank"},(0,a.kt)("inlineCode",{parentName:"p"},"inject()"))," function with ",(0,a.kt)("inlineCode",{parentName:"p"},"componentExtras")," to get the type of the component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\nval someClass = inject<SomeClass>(\n    componentExtras = CustomComponentExtras(OtherClass())\n)\n")))}d.isMDXComponent=!0},957:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/component-extras-622353a1c4d12d8544bc2cebc2f336b9.png"},9692:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/component-ba80f974b7d2d3e17d29047c89549a4d.png"}}]);
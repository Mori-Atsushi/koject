"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5385],{3905:(e,t,o)=>{o.d(t,{Zo:()=>l,kt:()=>u});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=n.createContext({}),m=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},l=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=m(o),h=a,u=p["".concat(s,".").concat(h)]||p[h]||d[h]||r;return o?n.createElement(u,i(i({ref:t},l),{},{components:o})):n.createElement(u,i({ref:t},l))}));function u(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:a,i[1]=c;for(var m=2;m<r;m++)i[m]=o[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},1054:(e,t,o)=>{o.d(t,{$h:()=>f,BQ:()=>z,E:()=>g,GU:()=>q,Hc:()=>r,IQ:()=>T,Kj:()=>F,N8:()=>R,NR:()=>m,O$:()=>A,Or:()=>E,Pc:()=>u,Q4:()=>D,TD:()=>N,UK:()=>K,Uf:()=>x,Vi:()=>Z,Vn:()=>v,Zf:()=>s,_P:()=>l,dK:()=>M,eG:()=>i,eh:()=>P,f3:()=>j,kJ:()=>S,m:()=>h,oX:()=>O,pn:()=>I,pt:()=>C,q:()=>c,q0:()=>V,qK:()=>p,ql:()=>k,s7:()=>Q,tB:()=>d,tQ:()=>y,wn:()=>w,yc:()=>b});var n=o(7294);const a=e=>{let{children:t,href:o}=e;return n.createElement("a",{href:`/koject/api${o}`,target:"_blank"},n.createElement("code",null,t))},r=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/-provides/index.html"},"@Provides"),i=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/-singleton/index.html"},"@Singleton"),c=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/-qualifier/index.html"},"@Qualifier"),s=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/-named/index.html"},"@Named"),m=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/-binds/index.html"},"@Binds"),l=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/start.html"},"Koject.start()"),p=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/-koject/stop.html"},"Koject.stop()"),d=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/inject.html"},"inject()"),h=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject/lazy-inject.html"},"lazyInject()"),u=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject.extras/-koject-extras/index.html"},"KojectExtras"),k=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject.extras/-koject-extras-message/index.html"},"@KojectExtrasMessage"),C=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject.component/-component-extras/index.html"},"ComponentExtras"),j=()=>n.createElement(a,{href:"/koject-core/com.moriatsushi.koject.error/-missing-extras-exception/index.html"},"MissingExtrasException"),f=()=>n.createElement(a,{href:"/koject-test/com.moriatsushi.koject.test/run-test.html"},"Koject.runTest()"),v=()=>n.createElement(a,{href:"/koject-test/com.moriatsushi.koject.test/start-test.html"},"Koject.startTest()"),x=()=>n.createElement(a,{href:"/koject-test/com.moriatsushi.koject.test/-test-provides/index.html"},"@TestProvides"),g=()=>n.createElement(a,{href:"/android/koject-android-core/com.moriatsushi.koject.android/application.html"},"application()"),y=()=>n.createElement(a,{href:"/android/koject-android-viewmodel/com.moriatsushi.koject.android.viewmodel/-view-model-component/index.html"},"@ViewModelComponent"),E=()=>n.createElement(a,{href:"/android/koject-android-viewmodel/com.moriatsushi.koject.android.viewmodel/-view-model-coroutine-scope/index.html"},"@ViewModelCoroutineScope"),w=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject/inject.html"},"ComponentActivity.inject()"),N=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject/lazy-inject.html"},"ComponentActivity.lazyInject()"),b=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/-activity-component/index.html"},"@ActivityComponent"),S=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/-activity-context/index.html"},"@ActivityContext"),O=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/-activity-context/index.html"},"@ActivityCoroutineScope"),T=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/lazy-view-models.html"},"ComponentActivity.lazyViewModels()"),P=()=>n.createElement(a,{href:"/android/koject-android-activity/com.moriatsushi.koject.android.activity/inject-view-models.html"},"ComponentActivity.injectViewModels()"),A=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject/inject.html"},"Fragment.inject()"),I=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject/lazy-inject.html"},"Fragment.lazyInject()"),K=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/-fragment-component/index.html"},"@FragmentComponent"),M=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/-fragment-coroutine-scope/index.html"},"@FragmentCoroutineScope"),z=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/-fragment-view-coroutine-scope/index.html"},"@FragmentViewCoroutineScope"),V=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/lazy-view-models.html"},"Fragment.lazyViewModels()"),D=()=>n.createElement(a,{href:"/android/koject-android-fragment/com.moriatsushi.koject.android.fragment/inject-view-models.html"},"Fragment.injectViewModels()"),F=()=>n.createElement(a,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/remember-inject.html"},"rememberInject()"),q=()=>n.createElement(a,{href:"/compose/koject-compose-viewmodel/com.moriatsushi.koject.compose.viewmodel/inject-view-model.html"},"injectViewModel()"),Z=()=>n.createElement(a,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/-compose-component/index.html"},"@ComposeComponent"),Q=()=>n.createElement(a,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/-compose-coroutine-scope/index.html"},"@ComposeCoroutineScope"),R=()=>n.createElement(a,{href:"/compose/koject-compose-core/com.moriatsushi.koject.compose/-compose-context/index.html"},"@ComposeContext")},9051:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>m,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=o(7462),a=(o(7294),o(3905)),r=o(1054);const i={},c="Component (Experimental)",s={unversionedId:"core/component",id:"core/component",title:"Component (Experimental)",description:"The Component feature is experimental.",source:"@site/docs/core/component.mdx",sourceDirName:"core",slug:"/core/component",permalink:"/koject/docs/core/component",draft:!1,editUrl:"https://github.com/Mori-Atsushi/koject/tree/main/docs/docs/core/component.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"KojextExtras (Experimental)",permalink:"/koject/docs/core/extras"},next:{title:"Test",permalink:"/koject/docs/test"}},m={},l=[{value:"What is the Component",id:"what-is-the-component",level:2},{value:"Create a custom Component",id:"create-a-custom-component",level:2},{value:"Advanced usage",id:"advanced-usage",level:2}],p={toc:l},d="wrapper";function h(e){let{components:t,...i}=e;return(0,a.kt)(d,(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"component-experimental"},"Component (Experimental)"),(0,a.kt)("admonition",{title:"Experimental",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"The Component feature is ",(0,a.kt)("strong",{parentName:"p"},"experimental"),".\nAPI may change in the future.")),(0,a.kt)("h2",{id:"what-is-the-component"},"What is the Component"),(0,a.kt)("p",null,"The Component allows you to group provided types and organize dependencies."),(0,a.kt)("p",null,"By default, provided types are registered on the root component.\nHowever, you can specify another component when providing types."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"// Registered in RootComponent\n@Provides\nclass NormalClass\n\n// Registered in SomeComponent\n@SomeComponent\n@Provides\nclass ComponentClass\n")),(0,a.kt)("p",null,"Types registered in a component can only refer to types within the same component and types of the root component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\nclass NormalClass\n\n@SomeComponent\n@Provides\nclass SameComponentClass\n\n@OtherComponent\n@Provides\nclass OtherComponentClass\n\n@SomeComponent\n@Provides\nclass ComponentClass(\n    val normalClass: NormalClass, // can be injected\n    val sameComponentClass: SameComponentClass, // can be injected\n    val otherComponentClass: OtherComponentClass, // cannot be injected!\n)\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:o(2915).Z,width:"1800",height:"771"})),(0,a.kt)("p",null,"You can provide extra dependencies for your components during field injection.\nThis can be used to provide instances created by the platform or dynamically change the dependencies."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"class ExtraClass // not provided\n\n@SomeComponent\n@Provides\nclass ComponentClass(\n    val extraClass: ExtraClass,\n)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\nval componentClass = inject<ComponentClass>(\n    componentExtras = SomeComponentExtras(ExtraClass())\n)\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:o(4608).Z,width:"1800",height:"771"})),(0,a.kt)("admonition",{title:"Limitation",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Koject does not offer a component hierarchy to avoid complexity.")),(0,a.kt)("h2",{id:"create-a-custom-component"},"Create a custom Component"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"In most cases, a custom component is not needed.\nAdding components can add complexity.\nCarefully consider your need to add it.")),(0,a.kt)("p",null,"To create a custom component, first, create a component annotation using the ",(0,a.kt)("inlineCode",{parentName:"p"},"@Component")," annotation."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\n@Component\nannotation class CustomComponent\n")),(0,a.kt)("p",null,"Next, add the component annotation created when providing and register the type to the component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Provides\n@CustomComponent\nclass SomeClass(\n    val extraClass: ExtraClass\n)\n")),(0,a.kt)("p",null,"Then, create an Extras class using the ",(0,a.kt)(r.pt,{mdxType:"ComponentExtras"})," interface.\nAt that time, specify the component to be created."),(0,a.kt)("p",null,"If the component requires additional dependencies, provide them in the properties of the Extras class."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@ExperimentalKojectApi\nclass CustomComponentExtras(\n    val extraClass: ExtraClass // provide ExtraClass\n): ComponentExtras<CustomComponent> // for CustomComponent\n")),(0,a.kt)("p",null,"Otherwise, create a class with no properties."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@ExperimentalKojectApi\nclass EmptyComponentExtras: ComponentExtras<EmptyComponent>\n")),(0,a.kt)("p",null,"Finally, call the ",(0,a.kt)(r.tB,{mdxType:"Inject"})," function with the ",(0,a.kt)("inlineCode",{parentName:"p"},"componentExtras")," parameter to get the type of the component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"@OptIn(ExperimentalKojectApi::class)\nval someClass = inject<SomeClass>(\n    componentExtras = CustomComponentExtras(ExtraClass())\n)\n")),(0,a.kt)("admonition",{title:"MIGRATION (VERSION 1.2.0)",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentExtras")," API has changed since v1.2.0."),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"// Until v1.1.0\n@ExperimentalKojectApi\n@ComponentExtras(CustomComponent::class)\nclass CustomComponentExtras(\n    val extra: ExtraClass\n)\n\n// Since v1.2.0\n@ExperimentalKojectApi\nclass CustomComponentExtras(\n    val extra: ExtraClass\n): ComponentExtras<CustomComponent>\n"))),(0,a.kt)("h2",{id:"advanced-usage"},"Advanced usage"),(0,a.kt)("p",null,"In ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentExtras"),", all non-private properties are treated as provides, and getters are also available."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},"class SomeComponentExtras(\n    // provide SomeClass1\n    val someClass1: SomeClass1\n): ComponentExtras<SomeComponent> {\n    // provide SomeClass2\n    val someClass2: SomeClass2 = SomeClass2()\n\n    // provide SomeClass3\n    val someClass3: SomeClass3\n        get() = SomeClass3()\n}\n")),(0,a.kt)("p",null,(0,a.kt)(r.q,{mdxType:"Qualifier"})," and ",(0,a.kt)(r.Zf,{mdxType:"Named"})," annotations can be used to distinguish between multiple providers of the same type."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-kotlin"},'class SomeComponentExtras: ComponentExtras<SomeComponent> {\n    // provide with a qualifier\n    @SomeQualifier\n    val someClass2: SomeClass2 = SomeClass2()\n\n    // provide with a name\n    @Named("some-name")\n    val someClass3: SomeClass3\n        get() = SomeClass3()\n}\n')),(0,a.kt)("p",null,"Note that ",(0,a.kt)(r.eG,{mdxType:"Singleton"})," is not available in ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentExtras"),"."))}h.isMDXComponent=!0},4608:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/component-extras-622353a1c4d12d8544bc2cebc2f336b9.png"},2915:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/component-ba80f974b7d2d3e17d29047c89549a4d.png"}}]);
<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-japanese-blog">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Koject v1.3.0 - DIコンテナを使ったテストコードを書こう | Koject</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mori-atsushi.github.io/koject/blog/jp/test-test-test"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Koject v1.3.0 - DIコンテナを使ったテストコードを書こう | Koject"><meta data-rh="true" name="description" content="継続的なソフトウェア開発を行う上で、テストコードは重要な役割を果たします。"><meta data-rh="true" property="og:description" content="継続的なソフトウェア開発を行う上で、テストコードは重要な役割を果たします。"><meta data-rh="true" property="og:image" content="https://mori-atsushi.github.io/koject/blog/2023-03-25/ogp.png"><meta data-rh="true" name="twitter:image" content="https://mori-atsushi.github.io/koject/blog/2023-03-25/ogp.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-03-25T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/Mori-Atsushi"><link data-rh="true" rel="icon" href="/koject/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://mori-atsushi.github.io/koject/blog/jp/test-test-test"><link data-rh="true" rel="alternate" href="https://mori-atsushi.github.io/koject/blog/jp/test-test-test" hreflang="en"><link data-rh="true" rel="alternate" href="https://mori-atsushi.github.io/koject/blog/jp/test-test-test" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/koject/blog/rss.xml" title="Koject RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/koject/blog/atom.xml" title="Koject Atom Feed">



<link rel="alternate" type="application/rss+xml" href="/koject/blog/jp/rss.xml" title="Koject RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/koject/blog/jp/atom.xml" title="Koject Atom Feed"><link rel="stylesheet" href="/koject/assets/css/styles.cdccce47.css">
<link rel="preload" href="/koject/assets/js/runtime~main.12e4c9aa.js" as="script">
<link rel="preload" href="/koject/assets/js/main.94178736.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/koject/"><b class="navbar__title text--truncate">Koject</b></a><a class="navbar__item navbar__link" href="/koject/docs/setup">Setup</a><a class="navbar__item navbar__link" href="/koject/docs/core/basic">Docs</a><a class="navbar__item navbar__link" target="_blank" href="/koject/api/index.html">API</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Blog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/koject/blog">English</a></li><li><a class="dropdown__link" href="/koject/blog/jp">日本語</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mori-atsushi/koject" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">全ての投稿</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/koject/blog/jp/migrating-from-hilt">HiltからKojectに移行する</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/koject/blog/jp/test-test-test">Koject v1.3.0 - DIコンテナを使ったテストコードを書こう</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/koject/blog/jp/android-components">Koject v1.2.0 - Androidコンポーネントの追加</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/koject/blog/jp/android-support">Koject v1.1.0 - Androidのサポート強化</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/koject/blog/jp/first-stable-release">Koject 1.0.0を公開しました！</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://mori-atsushi.github.io/koject/blog/2023-03-25/ogp.png"><header><h1 class="title_f1Hy" itemprop="headline">Koject v1.3.0 - DIコンテナを使ったテストコードを書こう</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-03-25T00:00:00.000Z" itemprop="datePublished">March 25, 2023</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Mori-Atsushi" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mori-atsushi.png" alt="Mori Atsushi"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Mori-Atsushi" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Mori Atsushi</span></a></div><small class="avatar__subtitle" itemprop="description">Koject owner</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p><img loading="lazy" src="/koject/assets/images/banner-247d1e22c584e691abcf151e30ceb846.png" width="2400" height="840" class="img_ev3q"></p><p>継続的なソフトウェア開発を行う上で、テストコードは重要な役割を果たします。
Koject v1.3.0ではテストのサポートが追加されました。
この記事ではテスト時にDIコンテナを使う理由と、Kojectを使ったテストコードの書き方、Koject v1.3.0で追加されたもう一つの機能について紹介します。</p><p><a href="/koject/blog/test-test-test"><strong>Read in English →</strong></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="テスト時もdiコンテナを使う">テスト時もDIコンテナを使う<a href="#テスト時もdiコンテナを使う" class="hash-link" aria-label="Direct link to テスト時もDIコンテナを使う" title="Direct link to テスト時もDIコンテナを使う">​</a></h2><p><a href="/koject/blog/jp/first-stable-release">以前紹介</a>したように、Dependency Injectionのパターンに従うことで、テスト容易性を向上させることができます。
テスト時に一部の依存関係を差し替えることで、外部との通信をなくして不安定なテストを避けたり、テストにかかる時間を短縮することが可能になります。</p><p>この際に利用される、実際とは異なるオブジェクトのことを、モックやフェイクと言います。
一方で、単一のクラスをテストするために、そのクラスの全ての依存関係を実際とは異なるモックに差し替えると、テストの信頼性や保守性の面で問題が生じるかもしれません。</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> VideoUploadServiceTest </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> videoUploader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VideoUploader</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> notificationManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NotificationManager</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> videoUploadService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">VideoUploadService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">videoUploader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> notificationManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation builtin">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fun</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>モックオブジェクトは実際のオブジェクトと全く同じ動作をするわけではないので、それが理由でテストが失敗する可能性があります。
テストが失敗した際に実際のコードが間違っているのか、もしくはうまくモックできていないのか、判断するのに手間がかかるようになります。
反対に、モックが正しくないことにより、コードが間違っているのにテストが成功する可能性も存在します。</p><p>テストの対象のほとんどがモックの場合、あまり意味のあるテストとは言えないでしょう。</p><p>また、モックオブジェクトが増えるとその保守も難しくなります。
モックしている対象が変わった場合、そのモックオブジェクトも追従する必要があります。
メンテしにくいテストは次第に機能しなくなるため、テストのメンテナンス性は重要です。</p><p>できる限り実際の依存関係を利用することをおすすめします。
制御が難しい外部と通信する場合や、そのままだと莫大な時間がかかる場合に、その該当箇所のみをテスト用のものに差し替えます。</p><p>テスト対象のクラスが多くの依存関係を持つ場合、インスタンスの生成に苦労すると考えるかもしれません。
心配しないでください。
本番環境と同じくDIコンテナを使えば、テスト時の依存関係も簡単に作成することができます。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unitテストでkojectを使う">UnitテストでKojectを使う<a href="#unitテストでkojectを使う" class="hash-link" aria-label="Direct link to UnitテストでKojectを使う" title="Direct link to UnitテストでKojectを使う">​</a></h2><p>テスト時にKojectを使う方法について紹介します。</p><p>例えば、このような依存関係を持つコードがあったとします。</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> Api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation builtin">@Provides</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation builtin">@Binds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> ApiImpl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> SampleRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation builtin">@Provide</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation builtin">@Binds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SampleRepositoryImpl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> api</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SampleRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation builtin">@Provides</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SampleController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> repository</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SampleRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>この<code>SampleController</code>に対して、テストコードを作成してみましょう。<a href="/koject/api/koject-test/com.moriatsushi.koject.test/run-test.html" target="_blank"><code>Koject.runTest()</code></a>を使うことで、テスト用のDIコンテナを起動してテストすることができます。
その後、<a href="/koject/api/koject-core/com.moriatsushi.koject/inject.html" target="_blank"><code>inject()</code></a>関数を使って、依存が解決されたクラスを取得します。</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SampleControllerTest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation builtin">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fun</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Koject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">runTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> controller </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> inject</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">SampleController</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// can be injected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Apiクラスをモックに差し替えたい場合、以下のように<a href="/koject/api/koject-test/com.moriatsushi.koject.test/-test-provides/index.html" target="_blank"><code>@TestProvides</code></a>を使って上書きします。
これにより、テスト時は<code>MockApi</code>が使われ、本番環境では<code>ApiImpl</code>が使われます。</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation builtin">@TestProvides</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation builtin">@Binds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> MockApi</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>テストには追加の依存関係の設定が必要です。
詳しくは、以下のドキュメントを参照してください。</p><ul><li><a href="/koject/docs/test">テスト(共通)</a></li><li><a href="/koject/docs/android/tests">Androidテスト</a></li><li><a href="/koject/docs/ios/tests">iOSテスト</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uiテストでkojectを使う">UIテストでKojectを使う<a href="#uiテストでkojectを使う" class="hash-link" aria-label="Direct link to UIテストでKojectを使う" title="Direct link to UIテストでKojectを使う">​</a></h2><p>KojectはUIテスト等のintegrationテストでも利用することができます。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-uiテスト">Android UIテスト<a href="#android-uiテスト" class="hash-link" aria-label="Direct link to Android UIテスト" title="Direct link to Android UIテスト">​</a></h3><p>Androidアプリでは、実機もしくはエミュレータを使った<a href="https://developer.android.com/training/testing/instrumented-tests" target="_blank" rel="noopener noreferrer">instrumentedテスト</a>を作成するか、<a href="https://robolectric.org/" target="_blank" rel="noopener noreferrer">Robolectoric</a>を利用することで、UIテストを実行します。</p><p>UIテストでテスト用DIコンテナを利用するには、アプリケーションクラスで呼んでいる<a href="/koject/api/koject-core/com.moriatsushi.koject/start.html" target="_blank"><code>Koject.start()</code></a>を<a href="/koject/api/koject-test/com.moriatsushi.koject.test/start-test.html" target="_blank"><code>Koject.startTest()</code></a>に置き換える必要があります。
アプリケーションクラスの置き換えにはカスタム<code>Runner</code>を作成してください。</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> TestApplication </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Application</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">override</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fun</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Koject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">startTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">application</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token label symbol" style="color:#36acaa">@TestApplication</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> TestRunner </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AndroidJUnitRunner</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">override</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fun</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">newApplication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        classLoader</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ClassLoader</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        className</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Context</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Application </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newApplication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">classLoader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TestApplication</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">java</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以下ドキュメントでより詳しい詳しい説明を行っています。</p><ul><li><a href="/koject/docs/android/tests">Androidテスト</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-uiテスト">iOS UIテスト<a href="#ios-uiテスト" class="hash-link" aria-label="Direct link to iOS UIテスト" title="Direct link to iOS UIテスト">​</a></h3><p>Kojectは<a href="https://kotlinlang.org/lp/mobile/" target="_blank" rel="noopener noreferrer">Kotlin Multiplatform Mobile</a>に対応しており、iOSでも利用することができます。</p><p>iOSのUIテストは<a href="https://developer.apple.com/documentation/xctest" target="_blank" rel="noopener noreferrer">XCTest</a>を利用し、Swiftで記述します。
以下のようにテスト時用の分岐を作成し、テスト用のDIコンテナを開始してください。</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token class-name">SwiftUI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> shared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute atrule" style="color:#00a4db">@main</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">MyApp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">App</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token directive property directive-name" style="color:#36acaa">#if</span><span class="token directive property" style="color:#36acaa"> DEBUG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> isTesting </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">CommandLine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arguments</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&quot;TESTING&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> isTesting </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">KojectHelper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shared</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">startTest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">KojectHelper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shared</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token directive property directive-name" style="color:#36acaa">#else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">KojectHelper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shared</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token directive property directive-name" style="color:#36acaa">#endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">some</span><span class="token plain"> </span><span class="token class-name">Scene</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token class-name">XCTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UITests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">XCTestCase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">XCUIApplication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">testSome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">launchArguments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;TESTING&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">launch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>iOSでKojectを利用する詳しい情報は、以下ドキュメントから確認できます。</p><ul><li><a href="/koject/docs/ios/basic">iOS(KMM)</a></li><li><a href="/koject/docs/ios/tests">iOSテスト</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="推移的な依存関係の収集">推移的な依存関係の収集<a href="#推移的な依存関係の収集" class="hash-link" aria-label="Direct link to 推移的な依存関係の収集" title="Direct link to 推移的な依存関係の収集">​</a></h2><p>Koject v1.3.0のもう一つの重要な変更点は、gradleマルチモジュールを使った場合の依存関係の収集が改善されたことです。</p><p>Koject v1.2.0以前は、配布している全ての依存関係はappモジュールから直接参照できる必要がありました。</p><p><img loading="lazy" src="/koject/assets/images/module1-b412540512eac5d8dc338f623ef4b0af.png" width="2400" height="840" class="img_ev3q"></p><p>Koject v1.3.0からは推移的な依存関係の収集に対応したため、直接参照できる必要はありません。</p><p><img loading="lazy" src="data:image/png;base64,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" width="1200" height="420" class="img_ev3q"></p><p>有効化には、以下のようにモジュール名を指定する必要があります。</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">build.gradle</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   implementation(&quot;com.moriatsushi.koject:koject-core:1.3.0-beta02&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   ksp(&quot;com.moriatsushi.koject:koject-processor-lib:1.3.0-beta02&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> ksp {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">     arg(&quot;moduleName&quot;, project.name) </span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>詳細は<a href="/koject/docs/setup">セットアップドキュメント</a>を確認してください。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kojectを使って快適な開発を">Kojectを使って快適な開発を<a href="#kojectを使って快適な開発を" class="hash-link" aria-label="Direct link to Kojectを使って快適な開発を" title="Direct link to Kojectを使って快適な開発を">​</a></h2><p>テスト時もDIコンテナを利用する有用性について紹介しました。
Kojectを利用することで、部分的に依存関係を差し替え、すぐにテストを開始することができます。
また、gradleマルチモジュールのサポートも強化されました。</p><p>KojectはDIコンテナとして基本的な機能を全て揃えており、今すぐ利用することができます。
なにか問題があれば、いつでも<a href="https://github.com/mori-atsushi/koject/issues" target="_blank" rel="noopener noreferrer">Issue</a>から教えて下さい。</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col margin-top--sm"><a href="https://github.com/Mori-Atsushi/koject/tree/main/docs/blog-jp/2023-03-25-test-test-test.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/koject/blog/jp/migrating-from-hilt"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">HiltからKojectに移行する</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/koject/blog/jp/android-components"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Koject v1.2.0 - Androidコンポーネントの追加</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#テスト時もdiコンテナを使う" class="table-of-contents__link toc-highlight">テスト時もDIコンテナを使う</a></li><li><a href="#unitテストでkojectを使う" class="table-of-contents__link toc-highlight">UnitテストでKojectを使う</a></li><li><a href="#uiテストでkojectを使う" class="table-of-contents__link toc-highlight">UIテストでKojectを使う</a><ul><li><a href="#android-uiテスト" class="table-of-contents__link toc-highlight">Android UIテスト</a></li><li><a href="#ios-uiテスト" class="table-of-contents__link toc-highlight">iOS UIテスト</a></li></ul></li><li><a href="#推移的な依存関係の収集" class="table-of-contents__link toc-highlight">推移的な依存関係の収集</a></li><li><a href="#kojectを使って快適な開発を" class="table-of-contents__link toc-highlight">Kojectを使って快適な開発を</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Koject. Built with Docusaurus.</div></div></div></footer></div>
<script src="/koject/assets/js/runtime~main.12e4c9aa.js"></script>
<script src="/koject/assets/js/main.94178736.js"></script>
</body>
</html>